<<<<<<< HEAD
{"version":3,"sources":["webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue?0f7c","webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue?5c11","webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue?cf96","webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue?0a0a","webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue","webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue?2dca","webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue?48d0"],"names":["Plans","data","TodayPlans","methods","change","e","UpdatePlans","$emit","today","fulldate","forEach","plan","StartDay","date","year","month","day","DayInterval","Interval","push","Frequency","PlansInfo","index","UseTimes","info","MedicalInfo","EquipmentID","name","MedicalName","amount","remark","PlanID","FindEquipment","Medicines","JSON","parse","global","EquipmentsInfo","MedicalIndex","item","medical","time","Hour","Minute","a","length","b","concat","splice","WeeHour","Date","timeA","timeB","console","log","sDate1","sDate2","aDate","iDays","split","parseInt","Math","abs","ID","EquipmentIndex","find","SetPlan","UserPlans","PlanIndex","uni","navigateTo","url","map","phone","components","uniCalendar"],"mappings":"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","file":"pages/Plans/AllPlans.js","sourcesContent":["import { render, staticRenderFns } from \"./AllPlans.vue?vue&type=template&id=2be7ca4a&\"\nimport script from \"./AllPlans.vue?vue&type=script&lang=js&\"\nexport * from \"./AllPlans.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AllPlans.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('2be7ca4a', component.options)\n    } else {\n      api.reload('2be7ca4a', component.options)\n    }\n    module.hot.accept(\"./AllPlans.vue?vue&type=template&id=2be7ca4a&\", function () {\n      api.rerender('2be7ca4a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"uni file/医云助手/pages/Plans/AllPlans.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./AllPlans.vue?vue&type=template&id=2be7ca4a&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./AllPlans.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./AllPlans.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport uniCalendar from \"@/components/uni-calendar/uni-calendar\"//日历插件\n\nvar Plans\nexport default{\n\tdata(){\n\t return {\n\t\t TodayPlans:[]\n\t }\n\t},\n\tmethods:{\n\t\tchange(e){\n\t\t\t/* 获取最新的Plan */\n\t\t\tthis.UpdatePlans()\n\t\t\t/* 父级方法，更新选中日期 */\n\t\t\tthis.$emit('UpdataChoosing',e)\n\t\t\tlet today=e.fulldate\n\t\t\tlet TodayPlans=[]\n\t\t\t\n\t\t\t/* 筛选选中日期含有的所有计划*/\n\t\t\tPlans.forEach(plan=>{\n\t\t\t\t/* 将计划日期转化成时间戳 */\n\t\t\t\tlet StartDay=plan.date.year+'/'+plan.date.month+'/'+plan.date.day\n\t\t\t\tlet DayInterval=this.DayInterval(StartDay,today)//计算日期间隔差\n\t\t\t\t/* \n\t\t\t\t\t 当前日期为开始日期,DayInterval=0\n\t\t\t\t\t 在开始日期后,DayInterval>0\n\t\t\t\t\t 未到开始日期,DayInterval<0\n\t\t\t\t*/\n\t\t\t if(DayInterval>=0){\n\t\t\t\t /* 计划每天执行/当前日期即为计划开始日期 */\n\t\t\t\t if(plan.Interval==1 || DayInterval==0)\n\t\t\t\t\t TodayPlans.push(plan)\n\t\t\t\t /* 选中日期与开始日期间隔是每n天执行的倍数时 */\n\t\t\t\t else if(DayInterval%plan.Frequency==0)\n\t\t\t\t\t TodayPlans.push(plan)\n\t\t\t }\n\t\t\t})\n\t\t\t\n\t\t\t/* 获取筛选后计划的内容 */\n\t\t\tlet PlansInfo=[]\n\t\t\tTodayPlans.forEach((plan,index)=>{\n\t\t\t\t/* 将时间遍历 */\n\t\t\t\tplan.UseTimes.forEach(info=>{\n\t\t\t\t\tlet data={MedicalInfo:[]}\n\t\t\t\t\tlet MedicalInfo={}\n\t\t\t\t\t/* 获取药物的名称 */\n\t\t\t\t\tif(plan.EquipmentID==\"不使用设备\"){\n\t\t\t\t\t\tMedicalInfo={\n\t\t\t\t\t\t\tname:plan.MedicalName,\n\t\t\t\t\t\t\tamount:info.amount,\n\t\t\t\t\t\t\tremark:info.remark,\n\t\t\t\t\t\t\tPlanID:plan.PlanID\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata.MedicalInfo.push(MedicalInfo)\n\t\t\t\t\t}\n\t\t\t\t\telse{//使用设备，根据选中的药柜编号筛选出药名\n\t\t\t\t\t\tlet index = this.FindEquipment(plan.EquipmentID)//获取设备的下标\n\t\t\t\t\t\tlet Medicines = JSON.parse(global.EquipmentsInfo[index].MedicalInfo)\n\t\t\t\t\t\tlet MedicalIndex = JSON.parse(plan.MedicalIndex)//获取选中的药柜编号\n\t\t\t\t\t\t\n\t\t\t\t\t\t/* 将选中的药柜进行遍历,并从中获取所有的药名 */\n\t\t\t\t\t\tMedicalIndex.forEach(item => {\n\t\t\t\t\t\t\tMedicines[item].forEach(medical => {\n\t\t\t\t\t\t\t\tMedicalInfo={\n\t\t\t\t\t\t\t\t\tname:medical.name,\n\t\t\t\t\t\t\t\t\tamount:medical.amount,\n\t\t\t\t\t\t\t\t\tremark:medical.remark,\n\t\t\t\t\t\t\t\t\tPlanID:plan.PlanID\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(MedicalInfo.name != '')\n\t\t\t\t\t\t\t\t\tdata.MedicalInfo.push(MedicalInfo)})\t\t\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t/* 获取时间 */\n\t\t\t\t\tdata.time=info.Hour+\":\"+info.Minute\n\n\t\t\t\t\tPlansInfo.push(data)\n\t\t\t\t})\n\t\t\t})\n\t\t\t/* 相同时间合并 */\n\t\t\tfor(let a=0;a<PlansInfo.length-1;a++)\n\t\t\t\tfor(let b=a+1;b<PlansInfo.length;b++)\n\t\t\t\t\tif(PlansInfo[a].time == PlansInfo[b].time){\n\t\t\t\t\t\tPlansInfo[a].MedicalInfo=PlansInfo[a].MedicalInfo.concat(PlansInfo[b].MedicalInfo)\n\t\t\t\t\t\tPlansInfo.splice(b,1)\n\t\t\t\t\t\t--b\n\t\t\t\t\t}\n\t\t\t/* 数组按时间排序 */\n\t\t\tlet WeeHour=new Date('2019/9/25 00:00:00')//获取0点时间戳\n\t\t\tfor(let a = 0;a < PlansInfo.length-1;a++)\n\t\t\t\tfor(let b =a+1;b<PlansInfo.length;b++){\n\t\t\t\t\tlet timeA=new Date('2019/9/25 '+PlansInfo[a].time+':00')-WeeHour\n\t\t\t\t\tlet timeB=new Date('2019/9/25 '+PlansInfo[b].time+':00')-WeeHour\n\t\t\t\t\tif(timeA>timeB){\n\t\t\t\t\t\tlet item=PlansInfo[a]\n\t\t\t\t\t\tPlansInfo[a]=PlansInfo[b]\n\t\t\t\t\t\tPlansInfo[b]=item\n\t\t\t\t\t} \n\t\t\t\t}\n\t\t\t\t\n\t\t\tthis.TodayPlans=PlansInfo\n\t\t\tconsole.log(this.TodayPlans)\n\t\t},\n\t\t\n\t\t/* 计算两个日期的天使差,2019-8-24格式 */\n\t\tDayInterval(sDate1, sDate2){ \n\t\t    var aDate, StartDay, today, iDays\n\t\t    aDate = sDate1.split(\"-\")\n\t\t    StartDay = new Date(aDate[1] + '-' + aDate[2] + '-' + aDate[0])//转换为9-25-2017格式 \n\t\t    aDate = sDate2.split(\"-\")\n\t\t    today = new Date(aDate[1] + '-' + aDate[2] + '-' + aDate[0])//转换为9-25-2017格式 \n\t\t    iDays = parseInt(Math.abs(StartDay - today) / 1000 / 60 / 60 / 24) //把相差的毫秒数转换为天数 \n\t\t    if((today-StartDay)<0)\n\t\t\t\t\tiDays=-iDays\n\t\t\treturn iDays\n\t\t},\n\t\t/* 根据ID获取设备的index */\n\t\tFindEquipment(ID){\n\t\t\tlet EquipmentIndex\n\t\t\tglobal.EquipmentsInfo.find((item,index)=>{\n\t\t\t\tif(item.ID==ID)\n\t\t\t\t\tEquipmentIndex=index\n\t\t\t})\n\t\t\treturn EquipmentIndex\n\t\t},\n\t\t/* 点击药名进入计划管理 */\n\t\tSetPlan(ID){\n\t\t\tlet UserPlans=global.UserPlans\n\t\t\tlet PlanIndex\n\t\t\tUserPlans.find((plan,index)=>{\n\t\t\t\tif(plan.PlanID==ID)\n\t\t\t\t\tPlanIndex=index\n\t\t\t\treturn plan.PlanID==ID\n\t\t\t})\n\t\t\tuni.navigateTo({url: \"Plans/AddPlan?PlanIndex=\"+PlanIndex})\n\t\t},\n\t\t\n\t\tUpdatePlans(){//将计划中字符串格式转化成对象或数组\n\t\t\tPlans=global.UserPlans.map(plan=>{\n\t\t\t\tlet data={\n\t\t\t\t\tPlanID:plan.PlanID,\n\t\t\t\t\tEquipmentID:plan.EquipmentID,\n\t\t\t\t\tFrequency:plan.Frequency,\n\t\t\t\t\tMedicalIndex:plan.MedicalIndex,\n\t\t\t\t\tMedicalName:plan.MedicalName,\n\t\t\t\t\tUseTimes:JSON.parse(plan.UseTimes),\n\t\t\t\t\tdate:JSON.parse(plan.date),\n\t\t\t\t\tphone:plan.phone\n\t\t\t\t}\n\t\t\t\treturn data\n\t\t\t})\n\t\t}\n\t},\n\tcomponents:{\n\t\tuniCalendar\n\t}\n}\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./AllPlans.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./AllPlans.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}
=======
{"version":3,"sources":["webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue?0f7c","webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue?5c11","webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue?cf96","webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue?0a0a","webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue","webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue?2dca","webpack:///G:/uni file/医云助手/pages/Plans/AllPlans.vue?48d0"],"names":["Plans","data","TodayPlans","methods","change","e","UpdatePlans","$emit","today","fulldate","forEach","plan","StartDay","date","year","month","day","DayInterval","Interval","push","Frequency","PlansInfo","index","UseTimes","info","MedicalInfo","time","Hour","Minute","EquipmentID","Medicines","item","name","amount","remark","PlanID","FindEquipment","JSON","parse","global","EquipmentsInfo","MedicalIndex","medical","a","length","b","concat","splice","WeeHour","Date","timeA","timeB","console","log","sDate1","sDate2","aDate","iDays","split","parseInt","Math","abs","ID","EquipmentIndex","find","SetPlan","UserPlans","PlanIndex","uni","navigateTo","url","map","phone","components","uniCalendar"],"mappings":"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","file":"pages/Plans/AllPlans.js","sourcesContent":["import { render, staticRenderFns } from \"./AllPlans.vue?vue&type=template&id=2be7ca4a&\"\nimport script from \"./AllPlans.vue?vue&type=script&lang=js&\"\nexport * from \"./AllPlans.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AllPlans.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('2be7ca4a', component.options)\n    } else {\n      api.reload('2be7ca4a', component.options)\n    }\n    module.hot.accept(\"./AllPlans.vue?vue&type=template&id=2be7ca4a&\", function () {\n      api.rerender('2be7ca4a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"uni file/医云助手/pages/Plans/AllPlans.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./AllPlans.vue?vue&type=template&id=2be7ca4a&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./AllPlans.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./AllPlans.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport uniCalendar from \"@/components/uni-calendar/uni-calendar\"//日历插件\n\nvar Plans\nexport default{\n\tdata(){\n\t return {\n\t\t TodayPlans:[]\n\t }\n\t},\n\tmethods:{\n\t\tchange(e){\n\t\t\t/* 获取最新的Plan */\n\t\t\tthis.UpdatePlans()\n\t\t\t/* 父级方法，更新选中日期 */\n\t\t\tthis.$emit('UpdataChoosing',e)\n\t\t\tlet today=e.fulldate\n\t\t\tlet TodayPlans=[]\n\t\t\t\n\t\t\t/* 筛选选中日期含有的所有计划*/\n\t\t\tPlans.forEach(plan=>{\n\t\t\t\t/* 将计划日期转化成时间戳 */\n\t\t\t\tlet StartDay=plan.date.year+'/'+plan.date.month+'/'+plan.date.day\n\t\t\t\tlet DayInterval=this.DayInterval(StartDay,today)//计算日期间隔差\n\t\t\t\t/* \n\t\t\t\t\t 当前日期为开始日期,DayInterval=0\n\t\t\t\t\t 在开始日期后,DayInterval>0\n\t\t\t\t\t 未到开始日期,DayInterval<0\n\t\t\t\t*/\n\t\t\t if(DayInterval>=0){\n\t\t\t\t /* 计划每天执行/当前日期即为计划开始日期 */\n\t\t\t\t if(plan.Interval==1 || DayInterval==0)\n\t\t\t\t\t TodayPlans.push(plan)\n\t\t\t\t /* 选中日期与开始日期间隔是每n天执行的倍数时 */\n\t\t\t\t else if(DayInterval%plan.Frequency==0)\n\t\t\t\t\t TodayPlans.push(plan)\n\t\t\t }\n\t\t\t})\n\t\t\t\n\t\t\t/* 获取筛选后计划的内容 */\n\t\t\tlet PlansInfo = []\n\t\t\tTodayPlans.forEach((plan,index)=>{\n\t\t\t\t/* 将时间遍历 */\n\t\t\t\tplan.UseTimes.forEach(info => {\n\t\t\t\t\tlet data = {MedicalInfo:[]}\n\t\t\t\t\t/* 获取时间 */\n\t\t\t\t\tdata.time = info.Hour + \":\" + info.Minute\n\t\t\t\t\t\n\t\t\t\t\t/* 获取药物的名称 */\n\t\t\t\t\tif(plan.EquipmentID === \"不使用设备\"){\n\t\t\t\t\t\tinfo.Medicines.forEach(item => {\n\t\t\t\t\t\t\tdata.MedicalInfo.push({\n\t\t\t\t\t\t\t\tname : item.name,\n\t\t\t\t\t\t\t\tamount : item.amount,\n\t\t\t\t\t\t\t\tremark : item.remark,\n\t\t\t\t\t\t\t\tPlanID : plan.PlanID\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse{//使用设备，根据选中的药柜编号筛选出药名\n\t\t\t\t\t\tconst index = this.FindEquipment(plan.EquipmentID)//获取设备的下标\n\t\t\t\t\t  const Medicines = JSON.parse(global.EquipmentsInfo[index].MedicalInfo)\n\t\t\t\t\t\tconst MedicalIndex = info.MedicalIndex\n\t\t\t\t\t\t/* 将选中的药柜进行遍历,并从中获取所有的药名 */\n\t\t\t\t\t\tMedicalIndex.forEach(item => {\n\t\t\t\t\t\t\tMedicines[item].forEach(medical => {\n\t\t\t\t\t\t\t\tlet MedicalInfo={\n\t\t\t\t\t\t\t\t\tname : medical.name,\n\t\t\t\t\t\t\t\t\tamount : medical.amount,\n\t\t\t\t\t\t\t\t\tremark : medical.remark,\n\t\t\t\t\t\t\t\t\tPlanID : plan.PlanID\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdata.MedicalInfo.push(MedicalInfo)})\t\t\n\t\t\t\t\t\t})\n\t\t\t\t\t }\n\t\t\t\t\tPlansInfo.push(data)\n\t\t\t\t})\n\t\t\t})\n\t\t\t/* 相同时间合并 */\n\t\t\tfor(let a=0;a<PlansInfo.length-1;a++)\n\t\t\t\tfor(let b=a+1;b<PlansInfo.length;b++)\n\t\t\t\t\tif(PlansInfo[a].time == PlansInfo[b].time){\n\t\t\t\t\t\tPlansInfo[a].MedicalInfo=PlansInfo[a].MedicalInfo.concat(PlansInfo[b].MedicalInfo)\n\t\t\t\t\t\tPlansInfo.splice(b,1)\n\t\t\t\t\t\t--b\n\t\t\t\t\t}\n\t\t\t/* 数组按时间排序 */\n\t\t\tlet WeeHour=new Date('2019/9/25 00:00:00')//获取0点时间戳\n\t\t\tfor(let a = 0;a < PlansInfo.length-1;a++)\n\t\t\t\tfor(let b =a+1;b<PlansInfo.length;b++){\n\t\t\t\t\tlet timeA=new Date('2019/9/25 '+PlansInfo[a].time+':00')-WeeHour\n\t\t\t\t\tlet timeB=new Date('2019/9/25 '+PlansInfo[b].time+':00')-WeeHour\n\t\t\t\t\tif(timeA>timeB){\n\t\t\t\t\t\tlet item=PlansInfo[a]\n\t\t\t\t\t\tPlansInfo[a]=PlansInfo[b]\n\t\t\t\t\t\tPlansInfo[b]=item\n\t\t\t\t\t} \n\t\t\t\t}\n\t\t\t\t\n\t\t\tthis.TodayPlans=PlansInfo\n\t\t\tconsole.log(this.TodayPlans)\n\t\t},\n\t\t\n\t\t/* 计算两个日期的天使差,2019-8-24格式 */\n\t\tDayInterval(sDate1, sDate2){ \n\t\t    var aDate, StartDay, today, iDays\n\t\t    aDate = sDate1.split(\"-\")\n\t\t    StartDay = new Date(aDate[1] + '-' + aDate[2] + '-' + aDate[0])//转换为9-25-2017格式 \n\t\t    aDate = sDate2.split(\"-\")\n\t\t    today = new Date(aDate[1] + '-' + aDate[2] + '-' + aDate[0])//转换为9-25-2017格式 \n\t\t    iDays = parseInt(Math.abs(StartDay - today) / 1000 / 60 / 60 / 24) //把相差的毫秒数转换为天数 \n\t\t    if((today-StartDay)<0)\n\t\t\t\t\tiDays=-iDays\n\t\t\treturn iDays\n\t\t},\n\t\t/* 根据ID获取设备的index */\n\t\tFindEquipment(ID){\n\t\t\tlet EquipmentIndex\n\t\t\tglobal.EquipmentsInfo.find((item,index)=>{\n\t\t\t\tif(item.ID==ID)\n\t\t\t\t\tEquipmentIndex=index\n\t\t\t})\n\t\t\treturn EquipmentIndex\n\t\t},\n\t\t/* 点击药名进入计划管理 */\n\t\tSetPlan(ID){\n\t\t\tlet UserPlans=global.UserPlans\n\t\t\tlet PlanIndex\n\t\t\tUserPlans.find((plan,index)=>{\n\t\t\t\tif(plan.PlanID==ID)\n\t\t\t\t\tPlanIndex=index\n\t\t\t\treturn plan.PlanID==ID\n\t\t\t})\n\t\t\tuni.navigateTo({url: \"Plans/AddPlan?PlanIndex=\"+PlanIndex})\n\t\t},\n\t\t\n\t\tUpdatePlans(){//将计划中字符串格式转化成对象或数组\n\t\t\tPlans=global.UserPlans.map(plan=>{\n\t\t\t\tlet data={\n\t\t\t\t\tPlanID:plan.PlanID,\n\t\t\t\t\tEquipmentID:plan.EquipmentID,\n\t\t\t\t\tFrequency:plan.Frequency,\n\t\t\t\t\tUseTimes:JSON.parse(plan.UseTimes),\n\t\t\t\t\tdate:JSON.parse(plan.date),\n\t\t\t\t\tphone:plan.phone\n\t\t\t\t}\n\t\t\t\treturn data\n\t\t\t})\n\t\t}\n\t},\n\tcomponents:{\n\t\tuniCalendar\n\t}\n}\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./AllPlans.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./AllPlans.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}
>>>>>>> yujinlong
